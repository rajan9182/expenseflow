#!/bin/bash

echo "üöÄ Starting Expense Management Backend..."
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"

# Check if MongoDB is running
if ! pgrep -x "mongod" > /dev/null; then
    echo "‚ö†Ô∏è  MongoDB is not running!"
    echo "Please start MongoDB first:"
    echo "  sudo systemctl start mongod"
    echo ""
    exit 1
fi

# Check if node_modules exists
if [ ! -d "node_modules" ]; then
    echo "üì¶ Installing dependencies..."
    npm install --no-bin-links
fi

# Check if .env exists
if [ ! -f ".env" ]; then
    echo "‚ö†Ô∏è  .env file not found!"
    echo "Please create .env file with MongoDB URI and JWT secret"
    exit 1
fi

echo "‚úÖ Starting server..."
node server.js
